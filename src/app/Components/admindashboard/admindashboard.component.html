<div class="container-fluid p-3">
    <div class="card festival-card shadow-sm p-3">
        <div class="d-flex justify-content-between align-items-center flex-wrap mb-3">
            <h4>Welcome, Admin!</h4>
            <button class="btn btn-danger btn-sm" (click)="logout()"> <i class="bi bi-box-arrow-left"></i>
                Logout</button>
        </div>

        <!-- Navigation Tabs -->
        <ul class="nav nav-pills mb-3 flex-wrap">
            <li class="nav-item" style="cursor: pointer;">
                <a class="nav-link" [class.active]="selectedTab === 'managers'" (click)="selectTab('managers')"> <i
                        class="bi bi-person-lines-fill"></i> Managers
                    Management</a>
            </li>
            <li class="nav-item" style="cursor: pointer;">
                <a class="nav-link" [class.active]="selectedTab === 'leaderboard'" (click)="selectTab('leaderboard')">
                    <i class="bi bi-people-fill"></i> Leaderboard</a>
            </li>
            <li class="nav-item" style="cursor: pointer;">
                <a class="nav-link" [class.active]="selectedTab === 'playerRegister'"
                    (click)="selectTab('playerRegister')"> <i class="bi bi-person-add"></i> PlayerRegister</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" routerLink="/score-board"> <i class="bi bi-person-vcard-fill"></i> Scoreboard</a>
            </li>
        </ul>


        <!-- player register -->
        <div *ngIf="selectedTab === 'playerRegister'">
            <app-registeration-dashboard></app-registeration-dashboard>
        </div>

        <!-- Managers Management -->
        <div *ngIf="selectedTab === 'managers'">
            <h5 class="festival-heading">Managers Management</h5>

            <form class="row g-3 mb-3">
                <!-- Username -->
                <div class="col-12 col-md-4">
                    <label for="username" class="form-label festival-label">Username</label>
                    <input type="text" id="username" class="form-control" placeholder="Enter username"
                        [(ngModel)]="newManager.username" name="username">
                </div>

                <!-- Password -->
                <div class="col-12 col-md-4">
                    <label for="password" class="form-label festival-label">Password</label>
                    <input type="password" id="password" class="form-control" placeholder="Enter password"
                        [(ngModel)]="newManager.password" name="password">
                </div>

                <!-- Game -->
                <div class="col-12 col-md-4">
                    <label for="game" class="form-label festival-label">Select Game</label>
                    <select id="game" class="form-select" [(ngModel)]="newManager.game" name="game">
                        <option *ngFor="let game of games" class="festival-option" [value]="game">{{ game }}</option>
                    </select>
                </div>

                <!-- Submit Button -->
                <div class="col-12">
                    <button type="button" class=" btn onam-btn  w-100" (click)="addManager()">
                        <i class="bi bi-person-add"></i> Add Manager
                    </button>
                </div>
            </form>
            <table class="table table-bordered table-hover align-middle">
                <thead class="table-light">
                    <tr>
                        <th scope="col">S.No</th>
                        <th scope="col">Username</th>
                        <th scope="col">Game</th>
                        <th scope="col" class="text-center">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let m of managers; let i = index">
                        <td>{{ i + 1 }}</td>
                        <td>{{ m.username }}</td>
                        <td>{{ m.game }}</td>
                        <td class="text-center">
                            <div class="btn-group">
                                <button class="btn btn-sm btn-warning">
                                    <i class="bi bi-pencil-square"></i> Edit
                                </button> &nbsp;&nbsp;
                                <button class="btn btn-sm btn-danger">
                                    <i class="bi bi-trash"></i> Delete
                                </button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>

        </div>


        <!-- Leaderboard -->
        <div *ngIf="selectedTab === 'leaderboard'" class="table-responsive">
            <h5 class="festival-heading">Leaderboard</h5>
            <!-- <table class="table table-bordered table-hover align-middle">
                <thead class="table-light">
                    <tr>
                        <th>Rank</th>
                        <th>Name</th>
                        <th>Total Score</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let l of leaderboard; let i = index">
                        <td>{{l.rank}}</td>
                        <td>{{l.name}}</td>
                        <td>{{l.total}}</td>
                    </tr>
                </tbody>
            </table> -->
            <table class="table table-bordered table-hover align-middle">
                <thead class="table-light">
                    <tr>
                        <th>Rank</th>
                        <th>Name</th>
                        <th>Total Score</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let l of leaderboard" [ngClass]="{
          'table-warning': l.rank === 1,  
          'table-secondary': l.rank === 2,
          'table-info': l.rank === 3       
        }">
                        <td>
                            <i *ngIf="l.rank === 1" class="bi bi-trophy-fill text-warning"></i>
                            <i *ngIf="l.rank === 2" class="bi bi-trophy-fill text-secondary"></i>
                            <i *ngIf="l.rank === 3" class="bi bi-trophy-fill text-info"></i>
                            {{l.rank}}
                        </td>
                        <td>{{l.name}}</td>
                        <td>{{l.total}}</td>
                    </tr>
                </tbody>
            </table>

            <hr>
            <!-- <div class="chart-container">
                <h3 class="chart-title">Game Status</h3>
                <div class="pie-chart"></div>
                <ul class="legend">
                    <li><span class="completed"></span> Completed </li>
                    <li><span class="inprogress"></span> In Progress (5)</li>
                    <li><span class="played"></span> Played (15)</li>
                </ul>
            </div> -->

            <div class="chart-container p-3 shadow-sm rounded">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h3 class="chart-title m-0">Game Status</h3>
                    <button class="btn btn-primary btn-sm" (click)="calculateGameStatus()">
                        <i class="bi bi-arrow-clockwise"></i> Refresh
                    </button>
                </div>

 
                 <div class="pie-chart" [ngStyle]="{'background': pieChartStyle}"></div>
              

                <ul class="legend list-unstyled mb-0">
                    <li><span class="completed"></span> Completed ({{ status.completed }})</li>
                    <li><span class="inprogress"></span> In Progress ({{ status.inProgress }})</li>
                    <li><span class="notplayed"></span> Not Played ({{ status.notPlayed }})</li>
                    <li><span class="played"></span> Played ({{ status.totalPlayed }})</li>
                </ul>
            </div>


        </div>
    </div>
</div>